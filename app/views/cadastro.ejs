<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Cadastro</title>
    <%- include('parts/head.ejs') %>

</head>

<body>

    <div class="container-fluid bgcinza">

        <%- include('parts/menu_logado.ejs') %>
            <div class="row ">
                <div class="padding">
                </div>
            </div>
            <div class="row">
                <div class="col-sm-1">
                </div>
                <div class="col-sm-10" style="background-color: white;">

                    <div class="row">
                        <div class="col-sm-5">

                        </div>
                        <div class="col-sm-2">
                            <h3 class="centro">Cadastro</h3>
                        </div>

                        <div class="montanha1">

                        </div>
                        <div class="col-sm-4">

                        </div>

                        <div class="col-sm-4">

                        </div>
                        <div class="montanha2">

                        </div>
                        <div class="col-sm-4">

                        </div>
                        <div class="col-sm-4">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                        </div>
                        <div class="col-sm-4">

                            <form class="centro cadastrar" method="POST">
                                <br><br>

                                <input type="text" id="nome" name="nome" placeholder="Nome"><br><br>

                                <input type="text" id="email" name="email" placeholder="Email"><br><br>

                                <input type="password" id="senha" name="senha" placeholder="senha"><br><br>

                                <input type="text" id="telefone" name="telefone" placeholder="Telefone"><br><br>

                                <input type="text" id="CPF" name="CPF" placeholder="CPF"><br><br>

                                <input type="text" id="RG" name="RG" placeholder="RG"><br><br>

                            </form>
                        </div>
                        <div class="col-sm-4">

                        </div>


                        <div class="row">
                            <div class="col-sm-5">

                            </div>
                            <div class="col-sm-2">

                                <div class="padding3">

                                </div>

                                <div id="btnCadastrar" class="centro button">

                                    <img class="icon" src="/images/send.svg" alt="icon">

                                </div>

                            </div>
                            <div class="col-sm-5">

                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-sm-1">
                </div>
            </div>


            <div class="padding"></div>

            <%- include('parts/footer.ejs') %>
    </div>


    <script type="text/javascript">
        const btnCadastrar = document.getElementById("btnCadastrar");
        
        btnCadastrar.addEventListener('click', () => {
            const httpRequest = new XMLHttpRequest();
            const URL = 'cadastrar';
            const dadosEnviar = formularioCadastrar();

            httpRequest.open('POST', URL, true);
            httpRequest.setRequestHeader('Content-type', 'application/json');
            httpRequest.responseType = 'json';

            httpRequest.send(JSON.stringify(dadosEnviar));
            httpRequest.onreadystatechange = function () {
                if (httpRequest.status == 200 && httpRequest.readyState == 4) {
                    const response = httpRequest.response;
                    alertar(response["tipo"], response["prefixo"], response["msg"]);
                }
            }


        });

        function formularioCadastrar() {
            return {
                "nome": document.getElementById("nome").value,
                "email": document.getElementById("email").value,
                "senha": document.getElementById("senha").value,
                "telefone": document.getElementById("telefone").value,
                "cpf": document.getElementById("CPF").value,
                "rg": document.getElementById("RG").value,
                "autorizacao": "equipe",
            };
        }
    </script>
    <%- include('parts/alerta.ejs') %>

    <script type="text/javascript" src="/javascripts/alerta.js"></script>


</body>

</html>